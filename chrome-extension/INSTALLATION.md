# 📦 Chrome 插件安装指南

## 快速安装

### 步骤 1: 打开扩展程序页面

在 Chrome 浏览器地址栏输入以下地址并回车:

```
chrome://extensions/
```

或者通过菜单访问:
- 点击浏览器右上角的 `⋮` (三个点)
- 选择 `更多工具` > `扩展程序`

### 步骤 2: 开启开发者模式

在扩展程序页面右上角，找到并开启"开发者模式"开关。

### 步骤 3: 加载插件

1. 点击左上角的"加载已解压的扩展程序"按钮
2. 在文件选择器中，导航到项目目录
3. 选择 `chrome-extension` 文件夹
4. 点击"选择文件夹"

### 步骤 4: 验证安装

安装成功后，你会看到:
- 插件卡片显示"扫码上传图片助手"
- 浏览器工具栏出现插件图标（📱）
- 状态显示为"已启用"

## 🎯 首次配置

### 1. 点击插件图标

点击浏览器工具栏中的插件图标，会显示弹窗。

### 2. 打开设置页面

在弹窗中点击"⚙️ 打开设置"按钮。

### 3. 配置服务器地址

默认地址是 `https://qr-image-uploader.onrender.com/`

如果需要修改:
- 在"服务器 URL"输入框中输入新地址
- 点击"💾 保存设置"

**本地开发时**: 使用 `http://localhost:3000/`

### 4. 测试连接

点击"🔍 测试连接"按钮，确认服务器可以正常访问。

## 🚀 开始使用

### 在任意网页测试

1. 打开一个带有文件上传功能的网页，例如:
   - Gmail 写邮件（附件上传）
   - 微信网页版（发送图片）
   - 任何社交媒体网站（发布图片）

2. 点击"选择文件"或"上传图片"按钮

3. 会弹出对话框，显示两个选项:
   - 📱 扫码上传
   - 💻 本地上传

4. 选择"📱 扫码上传"

5. 使用手机扫描二维码

6. 在手机上选择并上传图片

7. 图片会自动填充到网页的文件输入框

## 🔄 更新插件

如果插件代码有更新:

1. 访问 `chrome://extensions/`
2. 找到"扫码上传图片助手"
3. 点击刷新按钮（🔄）
4. 刷新正在使用插件的网页

## ❌ 卸载插件

如果需要卸载:

1. 访问 `chrome://extensions/`
2. 找到"扫码上传图片助手"
3. 点击"移除"按钮
4. 确认卸载

## 🐛 故障排除

### 问题 1: 无法加载插件

**原因**: 文件夹路径不正确

**解决**: 
- 确保选择的是 `chrome-extension` 文件夹
- 该文件夹内应该包含 `manifest.json` 文件

### 问题 2: 插件加载后显示错误

**原因**: manifest.json 格式错误或权限问题

**解决**:
- 检查 `manifest.json` 文件格式是否正确
- 确保所有引用的文件都存在（图标、脚本等）

### 问题 3: 点击上传按钮没有弹窗

**原因**: 
- 插件未启用
- Content script 未正确注入
- 网页使用了特殊的上传方式

**解决**:
1. 检查插件是否启用
2. 刷新网页后重试
3. 按 F12 打开开发者工具，查看 Console 是否有错误
4. 某些网站可能不兼容，可以尝试选择"本地上传"

### 问题 4: 扫码后图片无法传输

**原因**: 服务器配置问题

**解决**:
1. 检查服务器 URL 是否正确
2. 确保服务器正在运行
3. 在设置页面测试连接
4. 检查浏览器 Console 和网络面板的错误信息

### 问题 5: iframe 无法加载

**原因**: CORS 或 X-Frame-Options 限制

**解决**:
- 确保服务器允许在 iframe 中加载
- 检查服务器的响应头设置
- 尝试使用 HTTPS 地址

## 📱 在其他基于 Chromium 的浏览器中使用

此插件也兼容以下浏览器:

### Microsoft Edge
1. 访问 `edge://extensions/`
2. 按照相同步骤安装

### Brave Browser  
1. 访问 `brave://extensions/`
2. 按照相同步骤安装

### Opera
1. 访问 `opera://extensions/`
2. 按照相同步骤安装

### Vivaldi
1. 访问 `vivaldi://extensions/`
2. 按照相同步骤安装

## 💡 使用技巧

### 固定插件图标

1. 点击浏览器工具栏的拼图图标（扩展程序）
2. 找到"扫码上传图片助手"
3. 点击图钉图标，将其固定到工具栏

### 快捷键（未来功能）

目前插件不支持快捷键，但可以在未来版本中添加。

### 批量上传

如果网页支持多文件上传:
- 可以重复扫码上传多张图片
- 每次扫码上传一张

## 📞 获取帮助

如果遇到问题:

1. 查看 Console 日志（F12 > Console）
2. 查看插件的背景页日志（扩展程序页面 > 检查视图）
3. 在项目 GitHub 页面提交 Issue
4. 附上错误信息和复现步骤

## 🎓 进阶使用

### 自定义服务器

如果你搭建了自己的服务器:

1. 确保服务器运行在可访问的地址
2. 配置正确的 CORS 头
3. 在插件设置中输入服务器地址
4. 测试连接确保可以访问

### 开发模式

在开发和测试时:

1. 使用 `http://localhost:3000/` 作为服务器地址
2. 启动本地服务器: `npm start`
3. 修改代码后刷新插件
4. 刷新测试页面

### 查看日志

- **Content Script**: 在网页按 F12，查看 Console
- **Background Worker**: 在扩展程序页面点击"检查视图"
- **Popup**: 在弹窗上右键 > 检查
- **Options**: 在设置页面右键 > 检查

---

安装完成后，你就可以在任何网页中使用扫码上传功能了！🎉

